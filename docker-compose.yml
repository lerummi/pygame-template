services:
  pygbag:
    build:
      context: .
      dockerfile: Dockerfile
    image: pygame-template-pygbag:latest
    ports:
      - "8000:8000"
    volumes:
      - ./app:/app:rw
    command: ["uv", "run", "pygbag", "--bind", "0.0.0.0", "--port", "8000", "--cdn", "https://pygame-web.github.io/archives/0.9/", "/app"]
    environment:
      - PYGBAG_WATCH=1
      - RUST_LOG=trace
      - UV_LINK_MODE=hardlink
      - PYGBAG_BASE_URL=https://pygame-web.github.io/archives/0.9/
    restart: unless-stopped